<?xml version="1.0" encoding="UTF-8"?>
<p id="p0155">For a large number of fragments, we just need to use the loop function to deal with each individual repeatedly:
 <list list-type="simple" id="ulist0030">
  <list-item id="u0095">
   <p id="p0160">for i in $(ls ∗.pdb)</p>
  </list-item>
  <list-item id="u0100">
   <p id="p0165">do
    <list list-type="simple" id="ulist0035">
     <list-item id="u0105">
      <p id="p0170">fragname=$(basename ${i} .pdb)</p>
     </list-item>
     <list-item id="u0110">
      <p id="p0175">for j in $( awk '{if ($NF == "H") {print $2}}' ${i})</p>
     </list-item>
     <list-item id="u0115">
      <p id="p0180">do
       <list list-type="simple" id="ulist0040">
        <list-item id="u0120">
         <p id="p0185">awk '{if ($NF == "H" &amp;&amp; $2 != “‘${j}’”) {} else {print}}' ${i} &gt; ${fragname}_${j}.pdb</p>
        </list-item>
       </list>
      </p>
     </list-item>
     <list-item id="u0125">
      <p id="p0190">done</p>
     </list-item>
    </list>
   </p>
  </list-item>
  <list-item id="u0130">
   <p id="p0195">done</p>
  </list-item>
 </list>
</p>
